"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Cheer",{enumerable:!0,get:function(){return m}});const e=/*#__PURE__*/function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}(require("cheerio"));function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}const n=(e,t)=>e instanceof Function?e(t):e.find(t),i=(e,t)=>e instanceof Function?e(t).eq(0):e.find(t).eq(0),o=(e,t)=>{let r;switch(t??(t="text"),t.toLowerCase()){case"text":r=e.text().trim();break;case"texts":let n=e.contents(),i=[];for(let e=0;e<n.length;e++){let t=n.eq(e).text().trim();t.length>0&&i.push(t)}r=i;break;case"innerhtml":r=e.html().trim();break;default:r=e.attr(t)}return r},a=(e,t,r)=>{r??(r="text");let n=i(e,t);return n?o(n,r):""},l=(e,t,r)=>{r??(r="text");let i=n(e,t);if(!i)return[];let a=[];for(let e=0;e<i.length;e++){let t=o(i.eq(e),r);t&&a.push(t)}return a},c=(e,t)=>t?e.html(i(e,t)):e.html(),s=(e,t=[])=>{let r={};for(let n of t){if(!n.selector)continue;let t=a(e,n.selector,n.attribute);r[n.key]=n.callback?n.callback(t):t}return r},f=(e,t=[],r=[])=>{let n=[];for(let i=0;i<e.length;i++){let o=s(e[i],t);if(!o)continue;let a=!1;for(let e of r)if(!o[e]){a=!0;break}a||n.push(o)}return n},u=(e,t)=>{e instanceof Function?e(t).eq(0).remove():e.find(t).eq(0).remove()},h=(e,t)=>{e instanceof Function?e(t).remove():e.find(t).remove()},b=(e,t,r,n="after")=>{if(e instanceof Function)switch(n){case"before":e(r).before(t);break;case"after":e(r).after(t)}else switch(n){case"before":e.find(r).before(t);break;case"after":e.find(r).after(t)}},p=(e,t,r)=>{e instanceof Function?e(t).each((t,n)=>{let i=e(n),o=n.attribs,a=i.html(),l=e(`<${r}>`).attr(o).html(a);i.replaceWith(l)}):e.find(t).each((t,n)=>{let i=e(n),o=n.attribs,a=i.html(),l=e(`<${r}>`).attr(o).html(a);i.replaceWith(l)})},d=(e,t)=>e instanceof Function?e(t):e.find(t);class m{root(){return this.$}value(e,t){return a(this.$,e,t)}values(e,t){return l(this.$,e,t)}html(e){return c(this.$,e)}json(e=[]){return s(this.$,e)}jsons(e,t=[],r=[]){return f(e.toArray().map(e=>this.$(e)),t,r)}remove(e){u(this.$,e)}del(e){h(this.$,e)}add(e,t,r="after"){b(this.$,e,t,r)}retag(e,t){p(this.$,e,t)}find(e){return d(this.$,e)}constructor(r){t(this,"source",void 0),t(this,"$",void 0),this.source=r,this.$=e.load(r)}}
function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}import*as t from"cheerio";let r=(e,t)=>e instanceof Function?e(t):e.find(t),n=(e,t)=>e instanceof Function?e(t).eq(0):e.find(t).eq(0),i=(e,t)=>{let r;switch(t??(t="text"),t.toLowerCase()){case"text":r=e.text().trim();break;case"texts":let n=e.contents(),i=[];for(let e=0;e<n.length;e++){let t=n.eq(e).text().trim();t.length>0&&i.push(t)}r=i;break;case"innerhtml":r=e.html().trim();break;default:r=e.attr(t)}return r},a=(e,t,r)=>{r??(r="text");let a=n(e,t);return a?i(a,r):""},o=(e,t,n)=>{n??(n="text");let a=r(e,t);if(!a)return[];let o=[];for(let e=0;e<a.length;e++){let t=i(a.eq(e),n);t&&o.push(t)}return o},l=(e,t)=>t?e.html(n(e,t)):e.html(),s=(e,t=[])=>{let r={};for(let n of t){if(!n.selector)continue;let t=a(e,n.selector,n.target);r[n.key]=n.callback?n.callback(t):t}return r},c=(e,t=[],r=[])=>{let n=[];for(let i=0;i<e.length;i++){let a=s(e[i],t);if(!a)continue;let o=!1;for(let e of r)if(!a[e]){o=!0;break}o||n.push(a)}return n},f=(e,t)=>{e instanceof Function?e(t).eq(0).remove():e.find(t).eq(0).remove()},h=(e,t)=>{e instanceof Function?e(t).remove():e.find(t).remove()},u=(e,t,r,n="after")=>{if(e instanceof Function)switch(n){case"before":e(r).before(t);break;case"after":e(r).after(t)}else switch(n){case"before":e.find(r).before(t);break;case"after":e.find(r).after(t)}},m=(e,t,r)=>{e instanceof Function?e(t).each((t,n)=>{let i=e(n),a=n.attribs,o=i.html(),l=e(`<${r}>`).attr(a).html(o);i.replaceWith(l)}):e.find(t).each((t,n)=>{let i=e(n),a=n.attribs,o=i.html(),l=e(`<${r}>`).attr(a).html(o);i.replaceWith(l)})};class b{root(){return this.$}value(e,t){return a(this.$,e,t)}values(e,t){return o(this.$,e,t)}html(e){return l(this.$,e)}json(e=[]){return s(this.$,e)}jsons(e,t=[],r=[]){return c(e,t,r)}remove(e){f(this.$,e)}del(e){h(this.$,e)}add(e,t,r="after"){u(this.$,e,t,r)}retag(e,t){m(this.$,e,t)}constructor(r){e(this,"source",void 0),e(this,"$",void 0),this.source=r,this.$=t.load(r)}}export{b as Cheer,m as retag};